language: node_js
node_js:
  - lts/*
addons:
  apt:
    packages:
      - libgconf-2-4
cache:
  npm: true
  directories:
    #Cypress cache
    - ~/.cache

install:
  - npm ci

script:
  - npm start & wait-on http://localhost:3000
  - cypress run
  - npm run build

deploy:
  provider: surge
  project: ./build/
  domain: ca3frontendteam2.surge.sh
  skip_cleanup: true
